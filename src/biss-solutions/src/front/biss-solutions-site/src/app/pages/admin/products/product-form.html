<div class="product-form-page">
  <div class="page-header">
    <h1 class="page-title">{{ isEditMode ? 'Editar Produto' : 'Novo Produto' }}</h1>
    <p class="page-subtitle">{{ isEditMode ? 'Atualize as informações do produto' : 'Adicione um novo produto ao catálogo' }}</p>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading && isEditMode" class="loading-state">
    <i class="ri-loader-4-line"></i>
    <p>Carregando produto...</p>
  </div>

  <!-- Formulário -->
  <form *ngIf="!isLoading || !isEditMode" [formGroup]="productForm" (ngSubmit)="onSubmit()" class="product-form">
    <div class="form-grid">
      <!-- Coluna Esquerda -->
      <div class="form-column">
        <!-- Informações Básicas -->
        <div class="form-section">
          <h2 class="section-title">Informações Básicas</h2>

          <div class="form-group">
            <label for="title" class="form-label">
              Título <span class="required">*</span>
            </label>
            <input
              type="text"
              id="title"
              formControlName="title"
              class="form-input"
              [class.error]="getFieldError('title')"
              placeholder="Ex: BissSolutions.Api">
            <span *ngIf="getFieldError('title')" class="error-message">
              {{ getFieldError('title') }}
            </span>
          </div>

          <div class="form-group">
            <label for="description" class="form-label">Descrição</label>
            <textarea
              id="description"
              formControlName="description"
              class="form-textarea"
              rows="4"
              placeholder="Descreva o produto..."></textarea>
            <span class="form-hint">Máximo de 2000 caracteres</span>
          </div>

          <div class="form-group">
            <label for="currentVersion" class="form-label">Versão Atual</label>
            <input
              type="text"
              id="currentVersion"
              formControlName="currentVersion"
              class="form-input"
              placeholder="Ex: 1.0.0">
            <span class="form-hint">Versão atual do produto</span>
          </div>

          <div class="form-group">
            <label for="category" class="form-label">Categoria</label>
            <input
              type="text"
              id="category"
              formControlName="category"
              class="form-input"
              placeholder="Ex: Biblioteca, Framework, API...">
            <span class="form-hint">Categoria do produto</span>
          </div>

          <div class="form-group">
            <label for="image" class="form-label">URL da Imagem</label>
            <input
              type="text"
              id="image"
              formControlName="image"
              class="form-input"
              placeholder="/images/products/product.jpg">
            <span class="form-hint">Caminho da imagem no servidor</span>
          </div>

          <div class="form-group">
            <label for="price" class="form-label">Preço (R$)</label>
            <input
              type="number"
              id="price"
              formControlName="price"
              class="form-input"
              step="0.01"
              min="0"
              placeholder="0.00">
            <span class="form-hint">Preço do produto (opcional)</span>
          </div>
        </div>

        <!-- Tecnologias e Características -->
        <div class="form-section">
          <h2 class="section-title">Tecnologias e Características</h2>

          <div class="form-group">
            <label for="technologyItems" class="form-label">Itens de Tecnologia</label>
            <textarea
              id="technologyItems"
              formControlName="technologyItems"
              class="form-textarea"
              rows="3"
              placeholder="Ex: Clean Architecture, CQRS, Performance, .NET 9..."></textarea>
            <span class="form-hint">Liste as tecnologias e características principais</span>
          </div>

          <div class="form-group">
            <label for="features" class="form-label">Características</label>
            <textarea
              id="features"
              formControlName="features"
              class="form-textarea"
              rows="4"
              placeholder="Ex: ⚡73% melhoria no tempo de resposta..."></textarea>
            <span class="form-hint">Destaque as principais características e benefícios (Máximo 5000 caracteres)</span>
          </div>
        </div>
      </div>

      <!-- Coluna Direita -->
      <div class="form-column">
        <!-- Links -->
        <div class="form-section">
          <h2 class="section-title">Links e Documentação</h2>

          <div class="form-group">
            <label for="nugetLink" class="form-label">
              <i class="ri-npmjs-line"></i> Link NuGet
            </label>
            <input
              type="url"
              id="nugetLink"
              formControlName="nugetLink"
              class="form-input"
              placeholder="https://www.nuget.org/packages/...">
          </div>

          <div class="form-group">
            <label for="githubLink" class="form-label">
              <i class="ri-github-line"></i> Link GitHub
            </label>
            <input
              type="url"
              id="githubLink"
              formControlName="githubLink"
              class="form-input"
              placeholder="https://github.com/...">
          </div>

          <div class="form-group">
            <label for="documentationLink" class="form-label">
              <i class="ri-book-line"></i> Link Documentação
            </label>
            <input
              type="url"
              id="documentationLink"
              formControlName="documentationLink"
              class="form-input"
              placeholder="https://docs.example.com/...">
          </div>

          <div class="form-group">
            <label for="productLink" class="form-label">
              <i class="ri-external-link-line"></i> Link do Produto
            </label>
            <input
              type="url"
              id="productLink"
              formControlName="productLink"
              class="form-input"
              placeholder="https://product.example.com/...">
            <span class="form-hint">Link para página do produto (para produtos externos)</span>
          </div>
        </div>

        <!-- Configurações -->
        <div class="form-section">
          <h2 class="section-title">Configurações</h2>

          <div class="form-group">
            <label for="order" class="form-label">
              Ordem <span class="required">*</span>
            </label>
            <input
              type="number"
              id="order"
              formControlName="order"
              class="form-input"
              [class.error]="getFieldError('order')"
              min="0">
            <span class="form-hint">Ordem de exibição (quanto menor, mais aparece primeiro)</span>
            <span *ngIf="getFieldError('order')" class="error-message">
              {{ getFieldError('order') }}
            </span>
          </div>

          <div class="form-group">
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  formControlName="isActive"
                  class="checkbox-input">
                <span>Produto ativo</span>
              </label>
              <span class="form-hint">Produtos inativos não aparecem no site</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Botões de Ação -->
    <div class="form-actions">
      <button
        type="button"
        class="btn-secondary"
        (click)="cancel()"
        [disabled]="isLoading">
        Cancelar
      </button>
      <button
        type="submit"
        class="btn-primary"
        [disabled]="productForm.invalid || isLoading">
        <i *ngIf="isLoading" class="ri-loader-4-line"></i>
        <span>{{ isEditMode ? 'Atualizar' : 'Criar' }} Produto</span>
      </button>
    </div>
  </form>
</div>

